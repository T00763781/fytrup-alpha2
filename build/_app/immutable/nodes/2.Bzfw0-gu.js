import{s as x,B as H,d as v,u as W,g as p,n as A,i as F,y as h,C as Z,j as g,k as w,c as C,p as P,z as Q,l as _,a as I,q as B,D as X,o as Y,t as $,m as ee}from"../chunks/scheduler.D4wV5lJR.js";import{S as K,i as N,d as te,t as ae,a as re,m as ie,e as ne,b as oe}from"../chunks/index.D5HGq5EU.js";import{_ as D}from"../chunks/preload-helper.BQ24v_F8.js";import{g as se,m as le}from"../chunks/storage.DEI2aqyf.js";import{w as ce}from"../chunks/index.C9EuUJDl.js";let k=null;async function ue(){return k||(k=(async()=>{const t=await D(()=>import("../chunks/leaflet-src.DoEXxWUO.js").then(e=>e.l),__vite__mapDeps([]),import.meta.url);return await D(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),t.default})()),k}async function de(t){if(!t)return null;if(t._leaflet_map)return t._leaflet_map;const e=await ue();if(!e)return null;const r=e.icon({iconUrl:"/icons/marker_unseen.png",iconSize:[44,44],iconAnchor:[22,44],popupAnchor:[0,-44]}),n=e.icon({iconUrl:"/icons/marker_visited.png",iconSize:[44,44],iconAnchor:[22,44],popupAnchor:[0,-44]}),l=e.icon({iconUrl:"/icons/marker_completed.png",iconSize:[50,50],iconAnchor:[25,50],popupAnchor:[0,-50]}),i=[50.6718,-120.3645],c=e.map(t,{center:i,zoom:16,zoomControl:!0});t._leaflet_map=c,e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}).addTo(c);const a=(await D(()=>Promise.resolve().then(()=>me),void 0,import.meta.url)).default,o=new Set(se());return a.forEach(s=>{let m=r;o.has(s.id)&&(m=n),s.completed&&(m=l),e.marker(s.coords,{icon:m}).addTo(c).bindPopup(s.name)}),c}function he(t){let e,r,n,l,i,c,a,o,s,m,d,b,S,M,y,R="Continue",E,T,V;return{c(){e=_("div"),r=_("div"),n=_("img"),i=I(),c=_("div"),a=B(t[1]),o=I(),s=_("div"),m=B(t[3]),d=I(),b=_("div"),S=B(t[4]),M=I(),y=_("button"),y.textContent=R,this.h()},l(f){e=g(f,"DIV",{class:!0});var u=w(e);r=g(u,"DIV",{class:!0});var L=w(r);n=g(L,"IMG",{class:!0,src:!0,alt:!0}),i=C(L),c=g(L,"DIV",{class:!0});var z=w(c);a=P(z,t[1]),z.forEach(v),L.forEach(v),o=C(u),s=g(u,"DIV",{class:!0});var G=w(s);m=P(G,t[3]),G.forEach(v),d=C(u),b=g(u,"DIV",{class:!0});var U=w(b);S=P(U,t[4]),U.forEach(v),M=C(u),y=g(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(y)!=="svelte-1tlj5zy"&&(y.textContent=R),u.forEach(v),this.h()},h(){p(n,"class","portrait svelte-ydgxoh"),W(n.src,l=t[2])||p(n,"src",l),p(n,"alt",t[1]),p(c,"class","character svelte-ydgxoh"),p(r,"class","header svelte-ydgxoh"),p(s,"class","title svelte-ydgxoh"),p(b,"class","body svelte-ydgxoh"),p(y,"class","btn svelte-ydgxoh"),p(e,"class",E="panel "+(t[0]?"visible":"")+" svelte-ydgxoh")},m(f,u){F(f,e,u),h(e,r),h(r,n),h(r,i),h(r,c),h(c,a),h(e,o),h(e,s),h(s,m),h(e,d),h(e,b),h(b,S),h(e,M),h(e,y),T||(V=Z(y,"click",t[5]),T=!0)},p(f,[u]){u&4&&!W(n.src,l=f[2])&&p(n,"src",l),u&2&&p(n,"alt",f[1]),u&2&&A(a,f[1]),u&8&&A(m,f[3]),u&16&&A(S,f[4]),u&1&&E!==(E="panel "+(f[0]?"visible":"")+" svelte-ydgxoh")&&p(e,"class",E)},i:H,o:H,d(f){f&&v(e),T=!1,V()}}}function pe(t,e,r){let{visible:n=!1}=e,{character:l="Wolfie"}=e,{portrait:i="/fytrup-alpha2/characters/wolfie_neutral.png"}=e,{title:c=""}=e,{text:a=""}=e,{poiId:o=null}=e;const s=X();function m(){s("close",{poiId:o})}return t.$$set=d=>{"visible"in d&&r(0,n=d.visible),"character"in d&&r(1,l=d.character),"portrait"in d&&r(2,i=d.portrait),"title"in d&&r(3,c=d.title),"text"in d&&r(4,a=d.text),"poiId"in d&&r(6,o=d.poiId)},[n,l,i,c,a,m,o]}class fe extends K{constructor(e){super(),N(this,e,pe,he,x,{visible:0,character:1,portrait:2,title:3,text:4,poiId:6})}}const J=[{id:"futureStudentsWelcomeCentre",name:"Future Students Welcome Centre",coords:[50.6712223,-120.3656017],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Welcome—your TRU journey starts here."},{id:"cplulkwten",name:"Cplul’kw’ten — The Gathering Place",coords:[50.6706792982108,-120.36548203763114],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"A place to ground yourself and feel connected."},{id:"openLearning",name:"BC Centre for Open Learning (OLARA)",coords:[50.66987607492293,-120.36473131436695],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Flexible pathways start here—online, open, accessible."},{id:"tcc",name:"Tournament Capital Centre (TCC)",coords:[50.66900283034373,-120.3648821914328],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Fitness, recreation, and movement—your energy hub."},{id:"kenLepinScience",name:"Ken Lepin Science Building (S)",coords:[50.66895404537998,-120.36192719880228],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Science labs, discovery spaces, and hands-on learning."},{id:"oldGym",name:"Gymnasium (Old Gym)",coords:[50.66928768310049,-120.36377982004406],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Intramurals, rec classes, and campus activity."},{id:"nph",name:"Chappell Family Building for Nursing & Population Health",coords:[50.669821042288234,-120.36186593487231],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Where TRU nursing students learn through simulation."},{id:"culinaryCentre",name:"Culinary Arts Training Centre",coords:[50.670058865434555,-120.36272730572743],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Scratch Café aromas drifting your way..."},{id:"retailMeatStore",name:"Retail Meat Store (Meat-Cutting Program)",coords:[50.669680531924435,-120.36308386179974],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"One-of-a-kind in BC—meat cutting taught hands-on."},{id:"oldMain",name:"Old Main (OM) – Student Street",coords:[50.67123490745108,-120.36344776954364],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Advising, awards, enrollment, and academic crossroads."},{id:"campusCommons",name:"Campus Commons",coords:[50.67241883084885,-120.36502592837925],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Events, movement, and wide-open campus life."},{id:"internationalBuilding",name:"International Building (IB)",coords:[50.67223294995966,-120.36386681482455],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Study Abroad, TRU World, and a global campus community."},{id:"artsEducation",name:"Arts & Education (AE) Building",coords:[50.67318467176194,-120.36459463031238],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Humanities, teaching, languages, and creative inquiry."},{id:"lookout",name:"Kamloops Lookout",coords:[50.6735662771803,-120.36393665570465],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Where the rivers meet—your best panoramic moment."},{id:"campusActivityCentre",name:"Campus Activity Centre (CAC)",coords:[50.6725442393673,-120.3660135029301],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Bookstore, food, TRUSU—your indoor campus hub."},{id:"tradesTechCentre",name:"Trades & Technology Centre (TT)",coords:[50.67172781613885,-120.3679580200668],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Hands-on trades training in fully equipped shops."},{id:"vtec",name:"Veterinary Technology (VTEC)",coords:[50.67100238049488,-120.37090726565472],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Animal health labs and vet-tech training."},{id:"houseOfLearning",name:"Brown Family House of Learning (HOL)",coords:[50.67204779633193,-120.36499407113573],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Library, study floors, and Sk’elep watching over campus."},{id:"horticultureGardens",name:"Horticulture Gardens",coords:[50.67245814073066,-120.36711562980108],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Living labs for horticulture, ecology, and plant studies."},{id:"careerExperiential",name:"Career & Experiential Learning",coords:[50.670344254973486,-120.3616482892282],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Co-op, jobs, volunteering—your next step starts here."},{id:"gaglardiSobe",name:"Bob Gaglardi School of Business & Economics (BB)",coords:[50.67076421629197,-120.36296975638686],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Business, economics, entrepreneurship—your ideas scale here."},{id:"truLaw",name:"TRU Law Building",coords:[50.671101197919654,-120.36164213102707],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Home of the Juris Doctor—legal study and advocacy."},{id:"allMyRelations",name:"Indigenous Education & All My Relations Research Centre",coords:[50.67023092899578,-120.36164796816838],radius:40,character:"wolfie",portrait:"/fytrup-alpha2/characters/wolfie_neutral.png",intro:"Indigenous scholarship, community research, and shared space."}],me=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));function ge(t,e){const n=(e[0]-t[0])*(Math.PI/180),l=(e[1]-t[1])*(Math.PI/180),i=t[0]*(Math.PI/180),c=e[0]*(Math.PI/180),a=Math.sin(n/2),o=Math.sin(l/2),s=a*a+Math.cos(i)*Math.cos(c)*(o*o);return 2*6371e3*Math.asin(Math.sqrt(s))}let j=new Set;function _e(t){if(!("geolocation"in navigator)){console.warn("Geolocation not available.");return}navigator.geolocation.watchPosition(e=>{const{latitude:r,longitude:n}=e.coords,l=[r,n];J.forEach(i=>{if(j.has(i.id))return;ge(l,i.coords)<=i.radius&&(j.add(i.id),le(i.id),t(i))})},e=>console.warn("Geolocation error:",e),{enableHighAccuracy:!0})}const O=ce({visible:!1,character:"",portrait:"",title:"",text:"",poiId:null});let q=new Set;function ve(){_e(t=>{!t||q.has(t.id)||(q.add(t.id),O.set({visible:!0,character:t.character??"Wolfie",portrait:t.portrait??"/fytrup-alpha2/characters/wolfie_neutral.png",title:t.name,text:t.intro,poiId:t.id}))})}function ye(){O.update(t=>({...t,visible:!1}))}function we(t){let e,r,n,l,i,c;return i=new fe({props:{visible:t[0].visible,character:t[0].character,portrait:t[0].portrait,title:t[0].title,text:t[0].text,poiId:t[0].poiId}}),i.$on("close",t[3]),{c(){e=_("div"),r=_("div"),n=I(),l=_("div"),oe(i.$$.fragment),this.h()},l(a){e=g(a,"DIV",{class:!0});var o=w(e);r=g(o,"DIV",{id:!0,class:!0}),w(r).forEach(v),n=C(o),l=g(o,"DIV",{class:!0});var s=w(l);ne(i.$$.fragment,s),s.forEach(v),o.forEach(v),this.h()},h(){p(r,"id","map-container"),p(r,"class","svelte-15gl2c"),p(l,"class","dialogue-wrapper svelte-15gl2c"),p(e,"class","page svelte-15gl2c")},m(a,o){F(a,e,o),h(e,r),t[2](r),h(e,n),h(e,l),ie(i,l,null),c=!0},p(a,[o]){const s={};o&1&&(s.visible=a[0].visible),o&1&&(s.character=a[0].character),o&1&&(s.portrait=a[0].portrait),o&1&&(s.title=a[0].title),o&1&&(s.text=a[0].text),o&1&&(s.poiId=a[0].poiId),i.$set(s)},i(a){c||(re(i.$$.fragment,a),c=!0)},o(a){ae(i.$$.fragment,a),c=!1},d(a){a&&v(e),t[2](null),te(i)}}}function be(t,e,r){let n;O.subscribe(a=>r(0,n=a));let l;Y(async()=>{await $(),de(l),ve()});function i(a){ee[a?"unshift":"push"](()=>{l=a,r(1,l)})}return[n,l,i,()=>ye()]}class Me extends K{constructor(e){super(),N(this,e,be,we,x,{})}}export{Me as component};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../assets/leaflet.HupOsEJb.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}